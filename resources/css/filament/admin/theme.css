@import '/vendor/filament/filament/resources/css/theme.css';
@config 'tailwind.config.js';

@tailwind base;
@tailwind components;
@tailwind utilities;


/* ------------------------------
   GLOBAL VARIABLES
--------------------------------*/
:root {
  --sidebar-width: 280px;
  --transition-speed: 0.2s;

  --primary-rgb: 45, 43, 141;   /* #2D2B8D */
  --secondary-rgb: 255, 201, 3; /* #FFC903 */

  --primary-gradient: linear-gradient(145deg, #524ED5, #2D2B8D);
  --secondary-gradient: linear-gradient(145deg, #FFD333, #FFC903);
}

body { @apply antialiased; }


/* ------------------------------
   TYPOGRAPHY
--------------------------------*/
.fi-header-heading {
  @apply !text-2xl font-bold text-primary-800 dark:text-primary-300;
}

.fi-header-subheading {
  @apply !text-sm text-gray-600 dark:text-gray-400 max-w-3xl;
}


/* ------------------------------
   LAYOUT
--------------------------------*/
.fi-layout { @apply bg-white; }

.fi-main {
  @apply mt-0 mb-0 bg-white dark:bg-gray-900 shadow-none transition-all duration-300;
}

.fi-logo {
  @apply !h-10 transition-all duration-300 hover:scale-105;
}


/* ------------------------------
   SIDEBAR
--------------------------------*/
.fi-sidebar {
  @apply transition-all duration-300 ease-in-out border-r border-gray-100/50 dark:border-gray-800/50;
  background: linear-gradient(180deg, rgba(var(--primary-rgb), 0.02), rgba(var(--primary-rgb), 0.05));
}

.dark .fi-sidebar {
  background: linear-gradient(180deg, #181A20, #23263A);
}

.fi-sidebar.fi-sidebar-open {
  width: var(--sidebar-width);
}

.fi-sidebar-header {
  @apply py-4 !shadow-none sticky top-0 z-10;
  background: linear-gradient(180deg, rgba(var(--primary-rgb), 0.03), rgba(var(--primary-rgb), 0.07));
  border-bottom: 1px solid rgba(var(--primary-rgb), 0.1);
}

.dark .fi-sidebar-header {
  background: linear-gradient(180deg, rgba(var(--primary-rgb), 0.1), rgba(15,15,20,0.9));
  border-bottom: 1px solid rgba(var(--primary-rgb), 0.15);
}


/* ------------------------------
   TOPBAR
--------------------------------*/
.fi-topbar nav {
  @apply !ring-0 py-3 !border-none !shadow-none bg-white sticky top-0 z-10;
  border-bottom: 1px solid rgba(var(--primary-rgb), 0.1);
}

.fi-topbar * {
  @apply text-primary-400 dark:text-primary-300;
}


/* ------------------------------
   SIDEBAR GROUPS
--------------------------------*/
.fi-sidebar-nav-groups { @apply gap-y-6 px-3 py-4; }

.fi-sidebar-group { @apply space-y-1.5; }

.fi-sidebar-group-label {
  @apply text-xs font-bold uppercase tracking-wider px-4 mb-2 text-primary-600 dark:text-primary-400;
}


/* ------------------------------
   SIDEBAR ITEMS
--------------------------------*/
.fi-sidebar-item a {
  @apply px-4 py-2.5 rounded-xl flex items-center gap-x-3 transition-all duration-300 border-l-2 border-transparent;
}

.fi-sidebar-item a > svg {
  @apply w-5 h-5 text-primary-400 dark:text-primary-300 transition-all;
}

.fi-sidebar-item a:hover,
.fi-sidebar-item a:focus {
  background: rgba(var(--primary-rgb), 0.12);
  @apply shadow-sm border-secondary-500;
}

.dark .fi-sidebar-item a:hover,
.dark .fi-sidebar-item a:focus {
  background: linear-gradient(90deg, rgba(var(--secondary-rgb), 0.08), rgba(var(--primary-rgb), 0.18));
  @apply border-secondary-600;
}


/* --- Active State --- */
.fi-sidebar-item-active a {
  background: var(--primary-gradient);
  @apply text-white shadow-md border-l-0;
}

.fi-sidebar-item-active a > svg,
.fi-sidebar-item-active a > span {
  @apply text-white font-semibold;
}


/* ------------------------------
   SECTIONS & CARDS
--------------------------------*/
.fi-section {
  @apply rounded-xl border border-gray-200 dark:border-gray-800 shadow-sm transition-all;
  background: linear-gradient(145deg, #ffffff, #f8f9fa);
  overflow: visible !important;
}

.dark .fi-section {
  background: linear-gradient(145deg, #1f2937, #111827);
}

.fi-section-header {
  @apply px-6 py-4 border-b border-primary-100/30;
  background: linear-gradient(90deg, rgba(var(--primary-rgb), 0.05), transparent);
}

.fi-section-content {
  @apply p-6;
  overflow: visible !important;
}


/* ------------------------------
   FORM ELEMENTS (FIX DATETIME / SELECT)
--------------------------------*/
.fi-input-wrapper {
  @apply transition-all duration-200 ring-0;
}

.fi-input,
.fi-select select,
.fi-date-time-picker input {
  @apply rounded-lg border-gray-300 dark:border-gray-700 shadow-sm focus:border-primary-500 focus:ring-primary-500;
}

.fi-input-wrapper:focus-within {
  @apply ring-2 ring-primary-200 dark:ring-primary-900/30 rounded-lg;
}


/* ------------------------------
   BUTTONS
--------------------------------*/
.fi-btn {
  @apply rounded-lg shadow-sm transition-all duration-200;
}

.fi-btn:not(:disabled):hover { @apply shadow translate-y-[-1px]; }
.fi-btn:not(:disabled):active { @apply shadow-inner translate-y-[1px]; }

.fi-btn.fi-btn-color-primary {
  background: var(--primary-gradient);
  @apply text-white;
}

.fi-btn.fi-btn-color-secondary {
  background: var(--secondary-gradient);
  @apply text-gray-900;
}


/* ------------------------------
   DROPDOWNS
--------------------------------*/
.fi-dropdown-panel {
  @apply rounded-xl shadow-lg border border-gray-100 dark:border-gray-800 bg-white dark:bg-gray-800;
}


/* ------------------------------
   BADGES
--------------------------------*/
.fi-badge { @apply ring-1; }


/* ------------------------------
   RESPONSIVE
--------------------------------*/
@media (max-width: 768px) {
  .fi-sidebar.fi-sidebar-open {
    @apply fixed z-40 w-[280px] shadow-xl;
  }

  .fi-main { @apply mx-2 mb-2; }
}

/* ============================================
   FIX DEFINITIVO: Time Picker inputs cortados
============================================ */

/* 1. Contenedor flex del time picker - altura proporcional */
.fi-fo-date-time-picker .flex.items-center.justify-center,
.fi-fo-date-time-picker .flex.items-center.justify-center.rtl\:flex-row-reverse,
.fi-fo-date-time-picker-panel .flex.items-center.justify-center,
.fi-fo-date-time-picker-panel .flex.items-center.justify-center.rtl\:flex-row-reverse {
  height: auto !important;
  min-height: 48px !important;
  max-height: none !important;
  overflow: visible !important;
  padding: 4px 0 !important;
  gap: 0.5rem !important;
}

/* 2. Inputs del time picker - tamaño apropiado */
.fi-fo-date-time-picker input,
.fi-fo-date-time-picker-panel input {
  height: 40px !important;
  min-height: 40px !important;
  max-height: 40px !important;
  line-height: 40px !important;
  padding: 0 !important;
  overflow: visible !important;
  text-align: center !important;
  font-size: 14px !important;
}

/* 3. Input específico w-10 */
.fi-fo-date-time-picker input.w-10,
.fi-fo-date-time-picker-panel input.w-10 {
  width: 3rem !important; /* Aumentar de 2.5rem a 3rem */
  height: 40px !important;
  line-height: 38px !important;
}

/* 4. Separador ":" y labels */
.fi-fo-date-time-picker .text-sm.font-medium,
.fi-fo-date-time-picker-panel .text-sm.font-medium {
  height: 40px !important;
  line-height: 40px !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
}

/* 5. Panel principal */
.fi-fo-date-time-picker-panel {
  overflow: visible !important;
  max-height: none !important;
}

/* 6. Grid container */
.fi-fo-date-time-picker-panel .grid {
  overflow: visible !important;
}

/* ============================================================= */
/*     FIX GLOBAL DEFINITIVO PARA FILAMENT 3 (2025)             */
/*  → Soluciona dropdowns cortados en Select, filtros, acciones, etc. */
/* ============================================================= */

.fi-body,
.fi-modal,
.fi-modal-content,
.fi-modal-card,
.fi-sidebar,
.fi-sidebar-content,
.fi-card,
.fi-section,
.fi-section > .fi-section-content,
.fi-page,
.fi-main,
.fi-form,
.fi-fo-field-wrp,
.fi-field-wrp,
.fi-input-wrp,
.fi-grid {
    overflow: visible !important;
}

/* Choices.js (el que usa Filament cuando pones searchable() + native(false)) */
.choices__list--dropdown,
.choices__list--dropdown .choices__list,
.fi-dropdown-panel,
.fi-select-panel {
    z-index: 999999 !important;
    overflow: visible !important;
    position: absolute !important;
}

/* Aseguramos altura máxima razonable y scroll interno */
.choices__list--dropdown .choices__list {
    max-height: 320px !important;
    overflow-y: auto !important;
}

/* Fix extra por si usas modales anidados o wizards */
.fi-modal .fi-modal-card > div,
.fi-sidebar .fi-sidebar-content > div {
    overflow: visible !important;
}

/* Opcional: mejora visual del scroll en los dropdowns */
.choices__list--dropdown::-webkit-scrollbar {
    width: 8px;
}

.choices__list--dropdown::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 4px;
}

.choices__list--dropdown::-webkit-scrollbar-thumb {
    background: #c1c1c1;
    border-radius: 4px;
}

.choices__list--dropdown::-webkit-scrollbar-thumb:hover {
    background: #a8a8a8;
}
/* ============================================================= */
/* Estilo visual para dropdown de Choices.js                     */
/* ============================================================= */

.choices__list--dropdown {
    background-color: #ffffff !important; /* fondo sólido blanco */
    border: 1px solid rgb(229 231 235) !important; /* borde gris claro */
    border-radius: 0.5rem !important;     /* esquinas redondeadas */
    box-shadow: 0 4px 6px rgba(0,0,0,0.1),
                0 2px 4px rgba(0,0,0,0.06) !important; /* sombra suave */
    margin-top: 0.25rem !important;       /* espacio debajo del input */
    padding: 0.25rem 0 !important;
    width: 100% !important;               /* se adapta al ancho del input */
}

/* Modo oscuro */
.dark .choices__list--dropdown {
    background-color: #1f2937 !important; /* gris oscuro */
    border-color: #374151 !important;
}

/* ============================================================= */
/*           AJUSTE FINAL PARA EVITAR SOLAPAMIENTO               */
/* ============================================================= */

/* 1. Bajamos un poco el z-index del "panel" interno */
.fi-select-panel {
    z-index: 30 !important;
}

/* 2. El menú desplegable de Choices.js (searchable) tendrá z-index alto, 
      pero NO absurdo como 999999 */
.choices__list--dropdown,
.choices__list[role="listbox"] {
    z-index: 500 !important;
    position: absolute !important;
}

/* 3. Evitar que el dropdown se pegue demasiado al input */
.choices__list--dropdown {
    margin-top: 4px !important;
}

/* 4. Asegurar que el contenedor NO empuje el dropdown hacia arriba */
.choices {
    overflow: visible !important;
}

/* 5. Evitar que sections o grid contengan el dropdown dentro del "flow" */
.fi-section-content,
.fi-grid {
    overflow: visible !important;
}



/* ============================================================
   FIX GLOBAL PARA COMPONENTES DE FILAMENT QUE USAN POPOVERS
   (DatePicker, DateTimePicker, TimePicker, Select con opciones,
    Calendarios, Dropdowns, Overlays, RichEditor popups, etc.)
   ============================================================ */

/* 1️⃣ Permitir que los popovers puedan mostrarse sin ser recortados */
.fi-fo-date-time-picker,
.fi-fo-date-picker,
.fi-fo-time-picker,
.flatpickr-calendar,
.fi-dropdown,
.fi-select-panel,
.fi-overlay,
.fi-modal,
.fi-wizard,
.fi-repeater,
.fi-form,
.fi-field-wrp {
    overflow: visible !important;
}

/* 2️⃣ Filament usa paneles internos que cortan contenido. Los liberamos. */
.fi-input-wrp,
.fi-fo-field-wrp,
.fi-fo-text-input,
.fi-ta-textarea,
.fi-section-content,
.fi-page,
.fi-layout {
    overflow: visible !important;
}

/* 3️⃣ Los campos dentro de tabs y modales tienden a cortar popovers */
.fi-tabs,
.fi-tab-panel,
.fi-modal-window,
.fi-modal-content,
.fi-drawer,
.fi-drawer-content {
    overflow: visible !important;
}

/* 4️⃣ El calendario debe poder posicionarse encima sin límites */
.flatpickr-calendar {
    z-index: 999999;
    position: absolute !important;
}

/* 5️⃣ Asegurar que el input del datepicker no colapse el contenedor */
.fi-fo-date-time-picker input,
.fi-fo-date-picker input,
.fi-fo-time-picker input {
    min-width: 100%;
}

/* 6️⃣ Fix para dropdowns que se abrían detrás del modal */
.fi-dropdown-panel,
.fi-select-panel {
    position: absolute !important;
    z-index: 999999;
}

/* 7️⃣ Si el datetimepicker está en tablas u otros componentes */
.fi-table,
.fi-table-row,
.fi-table-cell {
    overflow: visible !important;
}

/* 8️⃣ Por si algún panel interno usa overflow:hidden */
*[class*="overflow-hidden"],
*[class*="overflow-clip"] {
    overflow: visible !important;
}
