@import '/vendor/filament/filament/resources/css/theme.css';
@config 'tailwind.config.js';

/* ===================================================
   GLOBAL VARIABLES
=================================================== */
:root {
  --sidebar-width: 280px;
  --transition-speed: 0.2s;

  --primary-rgb: 45, 43, 141;   /* #2D2B8D */
  --secondary-rgb: 255, 201, 3; /* #FFC903 */

  --primary-gradient: linear-gradient(145deg, #524ED5, #2D2B8D);
  --secondary-gradient: linear-gradient(145deg, #FFD333, #FFC903);

  --hover-gradient: linear-gradient(145deg, rgba(var(--primary-rgb), 0.08), rgba(var(--secondary-rgb), 0.08));
  --dark-hover-gradient: linear-gradient(145deg, rgba(var(--primary-rgb), 0.15), rgba(var(--secondary-rgb), 0.05));
}

body { @apply antialiased; }

/* ===================================================
   TYPOGRAPHY
=================================================== */
.fi-header-heading { @apply !text-2xl font-bold text-primary-800 dark:text-primary-300; }
.fi-header-subheading { @apply !text-sm text-gray-600 dark:text-gray-400 max-w-3xl; }

/* ===================================================
   LAYOUT
=================================================== */
.fi-layout, .fi-main { @apply bg-white dark:bg-gray-900 shadow-none transition-all duration-300; }

/* ===================================================
   SIDEBAR
=================================================== */
.fi-sidebar {
  @apply transition-all duration-300 ease-in-out;
  background: linear-gradient(180deg, rgba(var(--primary-rgb), 0.05), rgba(var(--primary-rgb), 0.12)) !important;
}
.dark .fi-sidebar { background: linear-gradient(180deg, #13151c 0%, #1b1e2b 100%) !important; }

.fi-sidebar.fi-sidebar-open { width: var(--sidebar-width); @apply border-r border-gray-100/50 dark:border-gray-800/50; }
.fi-sidebar-header {
  @apply py-4 !ring-0 !shadow-none sticky top-0 z-10;
  background: linear-gradient(180deg, rgba(var(--primary-rgb), 0.02), rgba(var(--primary-rgb), 0.05));
  border-bottom: 1px solid rgba(var(--primary-rgb), 0.1);
}
.dark .fi-sidebar-header { background: linear-gradient(180deg, rgba(var(--primary-rgb), 0.1), rgba(15,15,20,0.9)); border-bottom: 1px solid rgba(var(--primary-rgb), 0.2); }

.fi-sidebar-item a {
  padding: 0.60rem 1rem !important;
  @apply rounded-xl flex items-center gap-x-3 transition-all duration-300 border-l-2 border-transparent;
}
.fi-sidebar-item a:hover { background: rgba(var(--primary-rgb), 0.15) !important; @apply shadow-sm border-secondary-500; }
.fi-sidebar-item-active a { background: var(--primary-gradient) !important; color: white !important; @apply shadow-md; }

/* ===================================================
   CONTENT SECTIONS
=================================================== */
.fi-section {
  @apply rounded-xl border border-gray-200 dark:border-gray-800 overflow-hidden transition-all duration-200 shadow-sm hover:shadow-md;
  background: linear-gradient(145deg, #ffffff, #f8f9fa);
}
.dark .fi-section { background: linear-gradient(145deg, #1f2937, #111827); }

/* ===================================================
   CARDS & STATS
=================================================== */
.fi-wi-stats-overview-stat {
  @apply rounded-xl border border-gray-100 dark:border-gray-800 shadow-sm hover:shadow-md transition-all;
  border-top: 3px solid rgba(var(--secondary-rgb), 0.8);
}

/* ===================================================
   FORMS
=================================================== */
.fi-input, .fi-select select { @apply rounded-lg border-gray-300 dark:border-gray-700 shadow-sm focus:border-primary-500; }
.fi-input-wrp:focus-within { @apply ring-2 ring-primary-100 dark:ring-primary-900/40 rounded-lg; }

/* ===================================================
   BUTTONS
=================================================== */
.fi-btn { @apply rounded-lg shadow-sm transform transition-all duration-200; }
.fi-btn.fi-btn-color-primary { background: var(--primary-gradient); @apply text-white border-0; }

/* ===================================================
   BADGES
=================================================== */
.fi-badge { @apply px-1.5 py-0.5 text-[10px] rounded-md font-medium !important; }
.fi-badge-color-primary { @apply bg-primary-100 text-primary-700 dark:bg-primary-900/40 dark:text-primary-300; }
.fi-badge-color-secondary { @apply bg-secondary-100 text-secondary-800 dark:bg-secondary-900/40 dark:text-secondary-300; }
.fi-badge-color-success { @apply bg-green-100 text-green-700 dark:bg-green-900/40 dark:text-green-300; }
.fi-badge-color-danger { @apply bg-red-100 text-red-700 dark:bg-red-900/40 dark:text-red-300; }
.fi-badge-color-warning { @apply bg-yellow-100 text-yellow-700 dark:bg-yellow-900/40 dark:text-yellow-300; }
.fi-badge-color-info { @apply bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300; }

/* ===================================================
   NOTIFICATIONS
=================================================== */
.filament-notifications { @apply z-[9999]; }
.filament-notifications-notification {
  @apply rounded-xl shadow-xl border border-gray-200 dark:border-gray-800 p-4 backdrop-blur-md transition-all;
  background: linear-gradient(145deg, #ffffffee, #f8f9faee);
}
.dark .filament-notifications-notification { background: linear-gradient(145deg, #1f2937ee, #111827ee); }
.filament-notifications-notification-icon { @apply scale-110 mr-3; }
.filament-notifications-notification-title { @apply text-sm font-semibold text-primary-700 dark:text-primary-300; }
.filament-notifications-notification-body { @apply text-gray-600 dark:text-gray-300 text-sm; }
.filament-notifications-status-success { @apply bg-green-500; }
.filament-notifications-status-danger { @apply bg-red-500; }
.filament-notifications-status-warning { @apply bg-yellow-500; }
.filament-notifications-status-info { @apply bg-blue-500; }

/* ===================================================
   MODALS
=================================================== */
.fi-modal-window {
  @apply rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-800 overflow-hidden;
  backdrop-filter: blur(12px);
  background: linear-gradient(145deg, #ffffffdd, #f3f4f6dd);
}
.dark .fi-modal-window { background: linear-gradient(145deg, #111827dd, #0f172add); }
.fi-modal-header { @apply px-6 py-4 border-b border-gray-200 dark:border-gray-800; background: linear-gradient(90deg, rgba(var(--primary-rgb), 0.06), transparent); }
.fi-modal-heading { @apply text-lg font-bold text-primary-800 dark:text-primary-300; }
.fi-modal-content { @apply p-6 text-gray-700 dark:text-gray-300; }
.fi-modal-footer { @apply px-6 py-4 border-t border-gray-200 dark:border-gray-800 bg-gray-50 dark:bg-gray-900; }
.fi-modal { animation: fadeIn 0.25s ease-out; }

/* ===================================================
   ANIMATIONS
=================================================== */
@keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
.fi-page { animation: fadeIn 0.3s ease-out; }

/* ===================================================
   DATETIME PICKERS FIX
=================================================== */
/* Overflow visible solo en secciones con DateTimePicker */
.fi-section:has(.fi-fo-date-time-picker),
.fi-section:has(.fi-fo-date-time-picker) .fi-section-content { overflow: visible !important; }

/* Contenedor flex */
.fi-fo-date-time-picker .flex.items-center.justify-center,
.fi-fo-date-time-picker .flex.items-center.justify-center.rtl\:flex-row-reverse,
.fi-fo-date-time-picker-panel .flex.items-center.justify-center,
.fi-fo-date-time-picker-panel .flex.items-center.justify-center.rtl\:flex-row-reverse {
  height: auto !important; min-height: 48px !important; overflow: visible !important;
  padding: 4px 0 !important; gap: 0.5rem !important;
}

/* Inputs */
.fi-fo-date-time-picker input,
.fi-fo-date-time-picker-panel input {
  height: 40px !important;
  min-height: 40px !important;
  max-height: 40px !important;
  line-height: 40px !important;
  padding: 0 !important;
  overflow: visible !important;
  text-align: center !important;
  font-size: 14px !important;
}

/* Input específico w-10 */
.fi-fo-date-time-picker input.w-10,
.fi-fo-date-time-picker-panel input.w-10 {
  width: 3rem !important;
  height: 40px !important;
  line-height: 38px !important;
}

/* Separador ":" y labels */
.fi-fo-date-time-picker .text-sm.font-medium,
.fi-fo-date-time-picker-panel .text-sm.font-medium {
  height: 40px !important;
  line-height: 40px !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
}

/* Panel principal */
.fi-fo-date-time-picker-panel {
  overflow: visible !important;
  max-height: none !important;
}

/* Grid container */
.fi-fo-date-time-picker-panel .grid {
  overflow: visible !important;
}

/* Sidebar fondo y transición */
.fi-sidebar {
  background: linear-gradient(180deg, rgba(var(--primary-rgb), 0.04), rgba(var(--primary-rgb), 0.10)) !important;
  @apply transition-all duration-300 ease-in-out;
}

/* Sidebar oscuro */
.dark .fi-sidebar {
  background: linear-gradient(180deg, #12141b 0%, #1a1d29 100%) !important;
}

/* Ítems */
.fi-sidebar-item a {
  padding: 0.5rem 1rem !important;
  @apply rounded-lg flex items-center gap-x-3 transition-all duration-200 border-l-2 border-transparent text-sm font-medium;
}

/* Hover */
.fi-sidebar-item a:hover {
  background: rgba(var(--primary-rgb), 0.12) !important;
  @apply shadow-sm border-secondary-500;
}

/* Activo */
.fi-sidebar-item-active a {
  background: var(--primary-gradient) !important;
  color: #fff !important;
  @apply shadow-md border-l-0;
}

/* Separador visual entre sidebar y contenido */
.fi-sidebar.fi-sidebar-open {
  box-shadow: 2px 0 6px rgba(0, 0, 0, 0.05);
}

.fi-sidebar-item a svg {
  @apply w-5 h-5 text-gray-500 dark:text-gray-400;
}
.fi-sidebar-item-active a svg {
  @apply text-white;
}

/* Logo dentro del header del sidebar */
.fi-sidebar-header img {
  max-height: 70px !important;
  width: auto !important;
  object-fit: contain !important;
  margin: 0 auto !important;
  padding: 0.5rem 1rem !important;
}

/* ============================
   SIDEBAR - ITEM ACTIVO FIX
============================ */

/* Quitar estilos del wrapper para evitar deformación */
.fi-sidebar-item-active {
  background: transparent !important;
  padding: 0 !important;
  margin: 0 !important;
  border-radius: 0 !important;
  box-shadow: none !important;
}

/* Aplicar el estilo REAL solo al <a> */
.fi-sidebar-item-active a {
  background: var(--primary-gradient) !important;
  color: #ffffff !important;
  @apply shadow-md text-base font-semibold rounded-xl;

  padding: 0.75rem 1rem !important;
  margin: 4px 6px !important;

  display: flex !important;
  align-items: center !important;
  gap: 0.6rem !important;

  /* Para que el texto no se vea grisáceo */
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.25);
}

/* Ícono blanco */
.fi-sidebar-item-active a svg {
  @apply text-white w-5 h-5;
}

/* Logo en el login */
.fi-simple-header img.fi-logo {
  max-height: 80px !important;
  width: auto !important;
  object-fit: contain !important;
  margin: 0 auto !important;
  display: block !important;
}


/* Contenedor del avatar y dropdown */
.fi-dropdown-trigger,
.fi-user-menu,
.fi-topbar {
  overflow: visible !important;
  position: relative !important;
  z-index: 50 !important;
}

/* Dropdown del usuario */
.fi-user-menu-dropdown {
  position: absolute !important;
  top: 100% !important; /* fuerza apertura hacia abajo */
  bottom: auto !important;
  z-index: 9999 !important;
  @apply mt-2 rounded-xl shadow-xl border border-gray-200 dark:border-gray-800 backdrop-blur-md;

  background: linear-gradient(145deg, #ffffffee, #f8f9faee);
}

.dark .fi-user-menu-dropdown {
  background: linear-gradient(145deg, #1f2937ee, #111827ee);
}

.fi-notification-panel {
  z-index: 9999 !important;
  position: fixed !important;
  top: 3.5rem; /* ajusta según tu topbar */
  right: 1rem;
  width: 320px;
  max-height: 80vh;
  overflow-y: auto;
  @apply rounded-xl shadow-2xl backdrop-blur-md border border-gray-200 dark:border-gray-800;
  background: linear-gradient(145deg, #ffffffee, #f8f9faee);
}

.dark .fi-notification-panel {
  background: linear-gradient(145deg, #1f2937ee, #111827ee);
}

/* ============================================
   FIX: Avatar superpuesto sobre notificaciones
============================================ */

/* El avatar NO debe tener un z-index más alto que el panel */
.fi-user-menu,
.fi-dropdown-trigger {
  z-index: 20 !important; /* antes estaba en 50 */
}

/* El contenedor de la topbar también debe estar abajo */
.fi-topbar {
  z-index: 25 !important;
}

/* El panel de notificaciones DEBE ir arriba */
.fi-notification-panel {
  z-index: 9999 !important;
}

/* Incluso el wrapper del trigger de notificaciones debe estar abajo */
.fi-notifications {
  z-index: 30 !important;
}
